version: '3'

services:
  books:
    container_name: books
    build:
      context: ..
      dockerfile: docker/prod/node/Dockerfile
      args:
        name: book
    networks:
      - backend

  users:
    container_name: users
    build:
      context: ..
      dockerfile: docker/prod/node/Dockerfile
      args:
        name: user
    networks:
      - backend

  gateway: 
    container_name: gateway
    build: 
      context: ..
      dockerfile: docker/prod/node/Dockerfile
      args:
        name: gateway
    ports: 
      - 8080:8080
    networks: 
      - backend
      - frontend

networks:
  backend:
  frontend: